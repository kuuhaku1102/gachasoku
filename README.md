# Gachasoku Theme Enhancements

このテーマには管理画面から更新できるコンテンツ管理機能が多数実装されています。以下の機能概要と利用手順を参考に、サイト運用を効率化してください。

## ランキング管理
- 管理画面左メニューの「ランキング管理」から順位・画像・本文・詳細／公式ボタンなどを設定できます。
- 「項目を追加」で複数行を登録でき、ドラフト保存後にランキングページやショートコードから参照されます。
- ランキング表示は以下の 2 通りに対応しています。
  - 固定ページでテンプレート「ランキングページ」を選択する。
  - 本文にショートコード `[gachasoku_ranking title="見出し" lead="リード文"]` を挿入する。

## アーカイブページ
- `archive.php` では PC 3 列／スマートフォン 2 列のカード型レイアウトで投稿一覧を表示します。
- サムネイル・タイトル・抜粋・詳細ボタンがカード内に配置され、視認性の高いアーカイブページを提供します。

## カレンダー管理
- 管理画面の「カレンダー管理」から単発・期間・毎月・曜日指定などのイベントを登録できます。
- 投稿／固定ページ編集画面にはイベント一覧コピー用メタボックスが表示されます。
- ショートコード `[gachasoku_calendar]` または `[gachasoku_calendar month="YYYY-MM"]` で月間カレンダーを表示できます。
- 当日イベントがある場合はカレンダー下部にピックアップボタンが自動表示されます。

## アフィリエイトリンク置換
- 「リンク置換管理」でルートドメインと置換先 URL をペアで登録すると、サイト内の該当リンクを自動でアフィリエイト URL に差し替えます。
- 例: `oripa.ex-toreca.com` → `https://online-gacha-hack.com/e13e` を登録すると、該当ドメインを含むリンクはすべて後者にリダイレクトします。
- ランキング・カレンダー・投稿本文など、テーマ全体のリンクに適用されます。必要なドメインを追加した後、「リンク設定を保存」をクリックして更新してください。

